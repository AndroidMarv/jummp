jQuery(function(t){var e,a,i,r,n,o=(a=("https:"==location.protocol?"https:":"http:")+"//formoid.net/api/push",i=8==(e=(/MSIE (\d+)\./.exec(navigator.userAgent)||[0,0])[1])||9==e&&"file:"!=location.protocol?function(e,a){var i=new XDomainRequest,r=t.Deferred();return i.open(a.type,e),i.onload=function(){r.resolve(this.responseText)},i.onerror=function(){r.reject()},i.send(a.data),r}:(t.support.cors=!0,t.ajax),r=function(t,e){return t="__"+t+"__",e.length?(this[t]=e[0],this):this[t]},(n=function(t){t=t||{},this.__email__=t.email||"",this.__title__=t.title||"",this.__data__=t.data||[]}).prototype.email=function(t){return r.call(this,"email",arguments)},n.prototype.title=function(t){return r.call(this,"title",arguments)},n.prototype.data=function(t){return r.call(this,"data",arguments)},n.prototype.send=function(e,r){var n,o,l,s=(n=t.Deferred(),o=this,l=["email","title","data","send"],t.each(l,function(t,e){n[e]=function(){return o[e].apply(o,arguments)}}),n);return r&&(r.call(this,s),"pending"!=s.state())?s:(i(a,{type:"POST",data:JSON.stringify({email:this.__email__,form:{title:this.__title__,data:arguments.length?e:this.__data__}})}).done(function(t){try{var e=JSON.parse(t);e.error?s.reject(e.error):s.resolve(e.response)}catch(t){s.reject("Incorrect server response.")}}).fail(function(){var t="Failed to query the server. ";"onLine"in navigator&&!navigator.onLine?t+="No connection to the Internet.":t+="Check the connection and try again.",s.reject(t)}),s)},{Form:function(t){return new n(t)}});t('[data-form-type="formoid"]').each(function(){var e,a=t(this),i=a.is("form")?a:a.find("form"),r=a.find("[data-form-alert]"),n=a.is("[data-form-title]")?a:a.find("[data-form-title]"),l=a.find('[type="submit"]'),s=r.html();l.click(function(){i.addClass("form-active")}),i.submit(function(d){if(d.preventDefault(),i.addClass("form-active"),!l.hasClass("btn-loading")){var c=!0,f=[];e=e||o.Form({email:a.find("[data-form-email]").val(),title:n.attr("data-form-title")||n.text()}),r.html(""),a.find("[data-form-field]").each(function(){(function(e){if(e.checkValidity)return e.checkValidity();var a=!0,i=t(e).val(),r=t(e).attr("type");return i?a=!("email"===r&&!/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(i)):t(e).attr("required")&&(a=!1),t(e)[(a?"remove":"add")+"Class"]("form-invalid"),a})(this)||(c=!1),f.push([t(this).attr("data-form-field")||t(this).attr("name"),t(this).val()])}),c&&(l.addClass("btn-loading").prop("disabled",!0),e.send(f).done(function(e){i.removeClass("form-active"),a.find("[data-form-field]").val(""),r.removeAttr("hidden"),r.append(t('<div class="alert alert-form alert-success text-xs-center"/>').text(s||e))}).fail(function(e){r.append(t('<div class="alert alert-form alert-danger text-xs-center"/>').text(e))}).always(function(){l.removeClass("btn-loading").prop("disabled",!1)}))}})})});